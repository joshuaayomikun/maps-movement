name: Docker Image CI

on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

jobs:

  build:

    runs-on: ubuntu-latest

    steps:
    - name: zx-script
      # You may pin to the exact commit or the version.
      # uses: hata6502/zx-script-action@d87fa4c9481f1c2ae24197402995be5b31bd5085
      uses: hata6502/zx-script-action@v4.1.1
      with:
        # 
        script: ls
    - name: Deploy Multiple Docker Images to Heroku Apps
      # You may pin to the exact commit or the version.
      # uses: snithyanantham/docker-compose-multiple-apps-heroku-deploy@a4590bf326a12190449bdd4c07657e048b1ca9d7
      uses: snithyanantham/docker-compose-multiple-apps-heroku-deploy@v1.0
      with:
        # Email linked to your Heroku account
        email: ${{ secrets.EMAIL }}
        # Your Heroku API Key
        api_key: ${{ secrets.API_KEY }}
        # docker-compose File Path
        docker_compose_file: './src/docker-compose.yml'
        # List of Docker Images generated from docker-compose and Heroku app names with type
        heroku_apps: '[{"imagename":"frontend","appname":"route-history-ui","apptype":"web"},{"imagename":"backend","appname":"route-history-api","apptype":"web"}]'
